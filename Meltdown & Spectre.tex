% TEMPLATE FOR SEMINARS
%
% This template serves as a basic style for your seminar paper. Please
% make yourself familiar with LaTeX, BibTeX and this template. Several
% parts of the template need to be adjusted, these places are marked
% with FIXME.
%
% Contact your advisor in case you have questions.

\documentclass[a4paper,oneside,openright] {scrreprt}
\usepackage[T1]{fontenc}
\usepackage[latin1]{inputenc}
\usepackage[pdftex]{graphicx,color}
\usepackage{graphicx}
\usepackage{epsfig}
\usepackage{fancyhdr}
\usepackage{times}
\usepackage{url}
\usepackage{amsmath}
\usepackage{amsfonts}
%\usepackage{dtklogos}
%\usepackage{blindtext}
\usepackage{tikz}
%\usepackage{longtable}
%\usepackage{supertabular}
%\usepackage{verbatim}
%\usepackage{color}
%\usepackage{moreverb}       % z.B. \listinginput
%\usepackage{float}

\newcommand{\HRule}{\rule{\linewidth}{0.5mm}}

\title{\Huge Meltdown \& Spectre}
\author{\Large Marvin Schirrmacher}

\makeatletter

%*** Commands you may want to use ***
\newtheorem{theorem}{Theorem}[section]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{algorithm}[theorem]{Algorithm}
\newenvironment{example}{\begin{quote}{\bf Example:}}{\end{quote}}

\begin{document}

\input{titlepage}

\pagestyle{plain}
\cleardoublepage
\pagenumbering{roman}
\tableofcontents
\clearpage
\pagenumbering{arabic}

%************************************************************%
%* START WRITING HERE OR PROVIDE SECTIONS IN SEPERATE FILES *%
%************************************************************%

%%%
\chapter{Overview}  
\label{ch:overview}
%%%

Meltdown and Spectre are the result of the most critical vulnerabilities in todays processors 
which threaten the modern world of computing. They allow reading secret data from other processes running on
the same machine and thereby circumventing the protection mechanisms of operating systems.
These exploits put hardware and software companies under pressure for finding short-term as well
as long-term solutions to address arising problems. To avoid debacles quick solutions have been found 
for some of the uncovered exploit techniques, but in the long run the fundamental design of modern 
processors has to be challenged and reconsidered.

\section{Meltdown and Spectre in Brief}
\label{ch:intro:motivation}

Meltdown and Spectre misuse a feature of modern processors which enables fast execution of machine instructions, 
called \textit{out-of-order execution}. This feature allows to force the CPU to execute instructions 
which read secret data from address spaces of other processes or even the kernel address space. 
Even though the processors behave correctly by cleaning or vanishing illegally accessed data, 
they still leave traces which enable to build so called \textit{covert channels} 
and thus leveraging attacks likes Meltdown and Spectre.

\section{Relevance and Practical Impact}
\label{ch:intro:motivation}

Especially the rise of cloud computing accelerates the urgency for solving Meltdown and Spectre related issues.
Companies which run their software in the cloud became vulnerable because the exploit techniques enable attackers
to read private data of customers by running malicious software on the same machines. 

Also applications running on mobile phones or laptops are vulnerable and expose their sensitive data. 
Even browsers can easily be attacked with a short JavaScript implementation of Spectre and thus reveal secret data
like passwords, session keys or cookies from websites. These examples indicate that Meltdown and Spectre are a serious matter which should be dealt with.

This work introduces all basics needed to understand Meltdown and Spectre and also dives deeper into the implementation
to focus on technical details of the exploits. At the end the reader should have a deep understanding of Meltdown and Spectre
and should be able to distinguish their traits and impact on modern computing.

%%%
\chapter{Computer Architecture Basics}
\label{ch:basics}
%%%

This chapter introduces some basics which are needed to understand and create implementations of Meltdown and Spectre. 
All parts of this chapter are presented isolated and not in the context of the exploits. 
Rather their connection and purpose is highlighted in chapters 3 and 4.

\section{Processes, Address Spaces and Caching}
\label{ch:intro:motivation}

Operating systems use processes as an abstraction to handle execution of multiple programs at the same time
 and managing their associated resources like address spaces, registers, list of open files, 
 out-standing alarms and lists of related processes ~\cite{tanenbaum2009modern:39-41}. 
CPU hardware ensures that processes of the operating system, \textit{kernel processes},  and processes of users are protected from each other 
by generating isolated address spaces for each process 
and preventing mutual modification or illegal access of data ~\cite{silberschatz2012operating}.

Every illegal operation of a process trying to circumvent these isolation boundaries results in a 
fatal error, called \textit{trap}, which must be handled by the operating system. Memory separation is realized 
with the help of \textit{virtual address spaces} which are further divided into fixed-size \textit{pages} 
which are mapped into \textit{physical address space} by page tables ~\cite{hennessy2011computer:105-107}. 
A page table knows which process is allowed to access a specific page and thus it serves as
 a restriction mechanism to monitor and control illegal memory access.

The memory of a computer is divided into \textit{cache lines} which can be stored temporarily in the cache to accelerate
access of frequently used memory locations ~\cite{tanenbaum2009modern:24-27}. Because the size of a cache is limited
cache lines have to be evicted over time depending on their frequency of usage resulting in a \textit{cache hit} if a line
is cached, otherwise in a \textit{cache miss}. If a cache miss occurs the processor has to load data from another
cache or from memory which takes more clock cycles the deeper .

\section{Out-of-order Execution}
\label{ch:intro:motivation}

Tomasulo ~\cite{tomasulo1967efficient} created an algorithm which analyses a set or \textit{window} of
instructions and their relationships to maximize their overlapping capabilities and thus the ability to get parallelized 
without harming essential precedences. This allows processors to reorganize instructions so that their execution is faster 
in comparison to the execution time with the original order.
Succeeding instructions can be executed in parallel if preceding ones
 have to wait for accessing memory in case of a cache miss~\cite{hennessy2011computer:183}.

\section{Branch Prediction}
\label{ch:intro:branch_prediction}

Branch prediction is a feature of processors used to guess the result of a conditional branch in a sequence of program instructions to gain performance boosts~\cite{smith1995microarchitecture}.
So called \textit{branch predictors} analyse static information, e.g. opcode types, or dynamic program information, e.g. the branch history, to predict the result of these conditional branches.
The prediction decides if the instructions following the branch condition should be executed or not.
If the guess is correct performance improvements are gained because following statements can be executed in advance 
while the condition is evaluated.

%%%
\chapter{Meltdown versus Spectre}
\label{ch:contentI}
%%%

XXXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXXX

\section{Differences in Brief}
\label{ch:intro:motivation}

XXXXXXXXXXXXXXXXXXXX

\section{What Unites Them?}
\label{ch:intro:motivation}

XXXXXXXXXXXXXXXXXXXX

\subsection{Out-Of-Order Execution}
\label{ch:intro:motivation:A}

XXXXXXXXXXXXXXXXXXXX

\subsection{Covert Channels}
\label{ch:intro:motivation:A}

XXXXXXXXXXXXXXXXXXXX

\subsection{Cache Attacks}
\label{ch:intro:motivation:A}

XXXXXXXXXXXXXXXXXXXX

\section{What Divides Them?}
\label{ch:intro:motivation}

XXXXXXXXXXXXXXXXXXXX

\subsection{Meltdown and the Usage of Exceptions}
\label{ch:intro:motivation:A}

XXXXXXXXXXXXXXXXXXXX

\subsection{Spectre and the Usage of Branching}
\label{ch:intro:motivation:A}

XXXXXXXXXXXXXXXXXXXX

\subsection{Vulnerable Processors}
\label{ch:intro:motivation:A}

~\cite{kocher2018spectre}~\cite{lipp2018meltdown}~\cite{hennessy2011computer}
XXXXXXXXXXXXXXXXXXXX

XXXXXXXXXXXXXXXXXXXX
\footnote{https://github.com/IAIK/meltdown/tree/master/libkdump}
XXXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXXX

%%%
\chapter{Source Code Analysis}
\label{ch:sourceCodeAnalysis}
%%%

XXXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXXX

\section{Meltdown Implementation}
\label{ch:intro:motivation}

XXXXXXXXXXXXXXXXXXXX


\subsection{Transient Assembler Instructions}
\label{ch:intro:motivation:A}

XXXXXXXXXXXXXXXXXXXX

\subsection{Exception Suppression}
\label{ch:intro:motivation:A}

XXXXXXXXXXXXXXXXXXXX

\subsection{Detecting Cached Bytes}
\label{ch:intro:motivation:A}

XXXXXXXXXXXXXXXXXXXX

\subsection{Retrieving Secret Bytes}
\label{ch:intro:motivation:A}

XXXXXXXXXXXXXXXXXXXX

\section{Spectre Implementation}
\label{ch:intro:motivation}

XXXXXXXXXXXXXXXXXXXX

\subsection{Detecting Cached Bytes}
\label{ch:intro:motivation:A}

XXXXXXXXXXXXXXXXXXXX

\subsection{Mistraining the Branch Predictor}
\label{ch:intro:motivation:A}

XXXXXXXXXXXXXXXXXXXX

\subsection{Retrieving Secret Bytes}
\label{ch:intro:motivation:A}

XXXXXXXXXXXXXXXXXXXX

%%%
\chapter{Countermeasures}
\label{ch:countermeasures}
%%%

XXXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXXX

\section{Meltdown}
\label{ch:intro:motivation}

\section{Spectre}
\label{ch:intro:motivation}


%%%
\chapter{Conclusion}
\label{ch:conclusion}
%%%

XXXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXXX

\bibliography{literature}
\bibliographystyle{alpha}

\end{document}
